<div class="flex flex-col lg:flex-row max-w-7xl mx-auto p-4 sm:p-6 gap-4 sm:gap-6">
  <!-- === Холст === -->
  <div class="flex-1 bg-gray-100 rounded-xl shadow-md p-2 sm:p-4 flex justify-center items-center">
    <canvas
      #canvas
      (mousedown)="startCrop($event)"
      (mouseup)="endCrop($event)"
      class="w-full max-h-[60vh] sm:max-h-[80vh] border border-gray-400 rounded-lg cursor-crosshair bg-white object-contain"
    ></canvas>
  </div>

  <!-- === Управление === -->
  <div
    class="w-full lg:w-64 flex-shrink-0 bg-white p-4 rounded-xl shadow-md space-y-4 sm:space-y-6"
  >
    <!-- 🎨 Фильтры -->
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-700">🎨 Фильтры и улучшения</h3>
      <div class="flex flex-col space-y-2">
        <button class="btn flex items-center justify-center gap-2" (click)="applyFilmToNormal()">
          🎞️ Плёночный → Цветной
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="enhancePhoto()">
          ✨ Улучшить фото
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="beautifyFilmPhoto()">
          💎 Улучшить всё
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="autoColorCorrection()">
          ⚡ Автокоррекция
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="whiteBalance()">
          ⚪ Баланс белого
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="adjustSaturation()">
          🌈 Сатурация
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="applyCinematicLook()">
          🎬 Киноэффект
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="applyGrayscale()">
          ⬛⬜ Ч/Б
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="applySepia()">
          🟤 Сепия
        </button>
        <button class="btn flex items-center justify-center gap-2" (click)="applyBlur()">
          💨 Размытие
        </button>
      </div>
    </div>

    <!-- ✂️ Кадрирование -->
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-700">✂️ Кадрирование</h3>
      <button class="btn w-full flex items-center justify-center gap-2" (click)="cropBorders()">
        🖼️ Обрезать края
      </button>
    </div>

    <!-- 🔄 Трансформации -->
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-700">🔄 Трансформации</h3>
      <div class="flex flex-col space-y-2">
        <button class="btn w-full flex items-center justify-center gap-2" (click)="rotate(90)">
          🔄 Повернуть 90°
        </button>
        <button class="btn w-full flex items-center justify-center gap-2" (click)="flip(true)">
          ↔️ Отразить горизонтально
        </button>
        <button class="btn w-full flex items-center justify-center gap-2" (click)="flip(false)">
          ↕️ Отразить вертикально
        </button>
      </div>
    </div>

    <!-- ⏪ История -->
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-700">⏪ История</h3>
      <div class="flex space-x-2">
        <button class="btn flex-1 flex items-center justify-center gap-2" (click)="undo()">
          ⟲ Undo
        </button>
        <button class="btn flex-1 flex items-center justify-center gap-2" (click)="redo()">
          ⟳ Redo
        </button>
      </div>
    </div>
    <div>
      <h3 class="text-lg font-semibold mb-2 text-gray-700">💾 Сохранение</h3>
      <button class="btn w-full flex items-center justify-center gap-2" (click)="saveFinal()">
        💾 Сохранить и заменить
      </button>
    </div>
  </div>
</div>
